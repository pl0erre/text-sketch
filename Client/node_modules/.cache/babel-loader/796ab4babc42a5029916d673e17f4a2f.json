{"ast":null,"code":"import axios from \"axios\";\nimport qs from \"querystring\";\nexport default class Auth {\n  constructor(domain) {\n    this.domain = domain || process.env.REACT_APP_API; //!\n\n    this.login = this.login.bind(this);\n  }\n\n  login(username, password) {\n    debugger;\n    return axios({\n      method: \"POST\",\n      url: \"/auth/login\",\n      baseURL: this.domain,\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      data: qs.stringify({\n        username,\n        password\n      })\n    }).then(response => {\n      debugger;\n      this.setUser(response.data);\n    });\n  }\n\n  signup({\n    username,\n    password,\n    firstname,\n    lastname,\n    email\n  }) {\n    return axios({\n      method: \"POST\",\n      url: \"/auth/signup\",\n      baseURL: this.domain,\n      headers: {\n        'content-type': 'application/x-www-form-urlencoded'\n      },\n      data: qs.stringify({\n        username,\n        firstname,\n        lastname,\n        password,\n        email\n      })\n    }).then(response => {\n      this.setUser(response.data);\n      this.props.history.push('/');\n    });\n  }\n\n  loggedIn() {\n    const user = this.getUser();\n    return !!user;\n  }\n\n  setUser(user) {\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n\n  getUser() {\n    return JSON.parse(localStorage.getItem('user'));\n  }\n\n  logout() {\n    return axios({\n      baseURL: this.domain,\n      url: \"/auth/logout\"\n    }).then(res => {\n      localStorage.removeItem('user');\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/luca/code/Project_3/text-sketch/src/Utils/Auth.js"],"names":["axios","qs","Auth","constructor","domain","process","env","REACT_APP_API","login","bind","username","password","method","url","baseURL","headers","data","stringify","then","response","setUser","signup","firstname","lastname","email","props","history","push","loggedIn","user","getUser","localStorage","setItem","JSON","parse","getItem","logout","res","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,aAAf;AAEA,eAAe,MAAMC,IAAN,CAAW;AACxBC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAClB,SAAKA,MAAL,GAAcA,MAAM,IAAIC,OAAO,CAACC,GAAR,CAAYC,aAApC,CADkB,CACiC;;AACnD,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACD;;AAEDD,EAAAA,KAAK,CAACE,QAAD,EAAWC,QAAX,EAAqB;AACxB;AACA,WAAOX,KAAK,CAAC;AACTY,MAAAA,MAAM,EAAE,MADC;AAETC,MAAAA,GAAG,EAAE,aAFI;AAGTC,MAAAA,OAAO,EAAE,KAAKV,MAHL;AAITW,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAJA;AAKTC,MAAAA,IAAI,EAAEf,EAAE,CAACgB,SAAH,CAAa;AAACP,QAAAA,QAAD;AAAWC,QAAAA;AAAX,OAAb;AALG,KAAD,CAAL,CAONO,IAPM,CAOAC,QAAD,IAAa;AACjB;AACA,WAAKC,OAAL,CAAaD,QAAQ,CAACH,IAAtB;AACD,KAVM,CAAP;AAWD;;AAEDK,EAAAA,MAAM,CAAC;AAACX,IAAAA,QAAD;AAAWC,IAAAA,QAAX;AAAqBW,IAAAA,SAArB;AAAgCC,IAAAA,QAAhC;AAA0CC,IAAAA;AAA1C,GAAD,EAAmD;AACvD,WAAOxB,KAAK,CAAC;AACTY,MAAAA,MAAM,EAAE,MADC;AAETC,MAAAA,GAAG,EAAE,cAFI;AAGTC,MAAAA,OAAO,EAAE,KAAKV,MAHL;AAITW,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAJA;AAKTC,MAAAA,IAAI,EAAEf,EAAE,CAACgB,SAAH,CAAa;AAACP,QAAAA,QAAD;AAAWY,QAAAA,SAAX;AAAsBC,QAAAA,QAAtB;AAAgCZ,QAAAA,QAAhC;AAA0Ca,QAAAA;AAA1C,OAAb;AALG,KAAD,CAAL,CAONN,IAPM,CAOAC,QAAD,IAAa;AACjB,WAAKC,OAAL,CAAaD,QAAQ,CAACH,IAAtB;AACA,WAAKS,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD,KAVM,CAAP;AAWD;;AAEDC,EAAAA,QAAQ,GAAE;AACR,UAAMC,IAAI,GAAG,KAAKC,OAAL,EAAb;AACA,WAAO,CAAC,CAACD,IAAT;AACD;;AAEDT,EAAAA,OAAO,CAACS,IAAD,EAAM;AACXE,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAAChB,SAAL,CAAeY,IAAf,CAA7B;AACD;;AAEDC,EAAAA,OAAO,GAAE;AACP,WAAOG,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CAAP;AACD;;AAEDC,EAAAA,MAAM,GAAE;AACN,WAAOpC,KAAK,CAAC;AACTc,MAAAA,OAAO,EAAE,KAAKV,MADL;AAETS,MAAAA,GAAG,EAAE;AAFI,KAAD,CAAL,CAINK,IAJM,CAIAmB,GAAD,IAAQ;AACVN,MAAAA,YAAY,CAACO,UAAb,CAAwB,MAAxB;AACH,KANM,CAAP;AAOD;;AAxDuB","sourcesContent":["import axios from \"axios\";\nimport qs from \"querystring\";\n\nexport default class Auth {\n  constructor(domain) {\n    this.domain = domain || process.env.REACT_APP_API; //!\n    this.login = this.login.bind(this);\n  }\n\n  login(username, password) {\n    debugger\n    return axios({\n        method: \"POST\",\n        url: \"/auth/login\",\n        baseURL: this.domain,\n        headers: { 'content-type': 'application/x-www-form-urlencoded' },\n        data: qs.stringify({username, password}),\n    })\n    .then((response)=> {\n      debugger\n      this.setUser(response.data)\n    })\n  }\n\n  signup({username, password, firstname, lastname, email}) {\n    return axios({\n        method: \"POST\",\n        url: \"/auth/signup\",\n        baseURL: this.domain,\n        headers: { 'content-type': 'application/x-www-form-urlencoded' },\n        data: qs.stringify({username, firstname, lastname, password, email}),\n    })\n    .then((response)=> {\n      this.setUser(response.data);\n      this.props.history.push('/');\n    })\n  }\n\n  loggedIn(){\n    const user = this.getUser()\n    return !!user; \n  }\n\n  setUser(user){\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n\n  getUser(){\n    return JSON.parse(localStorage.getItem('user'));\n  }\n\n  logout(){\n    return axios({\n        baseURL: this.domain,\n        url: \"/auth/logout\"\n    })\n    .then((res)=> {\n        localStorage.removeItem('user');\n    })\n  }    \n}"]},"metadata":{},"sourceType":"module"}